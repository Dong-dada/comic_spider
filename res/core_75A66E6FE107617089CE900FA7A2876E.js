function FastClick(n,t){"use strict";function o(n,t){return function(){return n.apply(t,arguments)}}var e,r,u,i,f;if(t=t||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=t.touchBoundary||10,this.layer=n,this.tapDelay=t.tapDelay||200,!FastClick.notNeeded(n)){for(r=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],u=this,i=0,f=r.length;i<f;i++)u[r[i]]=o(u[r[i]],u);deviceIsAndroid&&(n.addEventListener("mouseover",this.onMouse,!0),n.addEventListener("mousedown",this.onMouse,!0),n.addEventListener("mouseup",this.onMouse,!0)),n.addEventListener("click",this.onClick,!0),n.addEventListener("touchstart",this.onTouchStart,!1),n.addEventListener("touchmove",this.onTouchMove,!1),n.addEventListener("touchend",this.onTouchEnd,!1),n.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(n.removeEventListener=function(t,i,r){var u=Node.prototype.removeEventListener;t==="click"?u.call(n,t,i.hijacked||i,r):u.call(n,t,i,r)},n.addEventListener=function(t,i,r){var u=Node.prototype.addEventListener;t==="click"?u.call(n,t,i.hijacked||(i.hijacked=function(n){n.propagationStopped||i(n)}),r):u.call(n,t,i,r)}),typeof n.onclick=="function"&&(e=n.onclick,n.addEventListener("click",function(n){e(n)},!1),n.onclick=null)}}function Swipe(n,t){"use strict";function b(){var t,f;for(o=r.children,c=new Array(o.length),u=n.getBoundingClientRect().width||n.offsetWidth,r.style.width=o.length*u+"px",t=o.length;t--;)f=o[t],f.style.width=u+"px",f.setAttribute("data-index",t),l.transitions&&(f.style.left=t*-u+"px",s(t,i>t?-u:i<t?u:0,0));l.transitions||(r.style.left=i*-u+"px"),n.style.visibility="visible"}function rt(){i?y(i-1):t.continuous&&y(o.length-1)}function tt(){i<o.length-1?y(i+1):t.continuous&&y(0)}function y(n,r){if(i!=n){if(l.transitions){for(var e=Math.abs(i-n)-1,f=Math.abs(i-n)/(i-n);e--;)s((n>i?n:i)-e-1,u*f,0);s(i,u*f,r||h),s(n,0,r||h)}else it(i*-u,n*-u,r||h);i=n,d(t.callback&&t.callback(i,o[i]))}}function s(n,t,i){p(n,t,i),c[n]=t}function p(n,t,i){var u=o[n],r=u&&u.style;r&&(r.webkitTransitionDuration=r.MozTransitionDuration=r.msTransitionDuration=r.OTransitionDuration=r.transitionDuration=i+"ms",r.webkitTransform="translate("+t+"px,0)translateZ(0)",r.msTransform=r.MozTransform=r.OTransform="translateX("+t+"px)")}function it(n,u,f){if(!f){r.style.left=u+"px";return}var s=+new Date,e=setInterval(function(){var h=+new Date-s;if(h>f){r.style.left=u+"px",a&&g(),t.transitionEnd&&t.transitionEnd.call(event,i,o[i]),clearInterval(e);return}r.style.left=(u-n)*(Math.floor(h/f*100)/100)+n+"px"},4)}function g(){nt=setTimeout(tt,a)}function k(){a=0,clearTimeout(nt)}var ut=function(){},d=function(n){setTimeout(n||ut,0)},l={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(n){var i=["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"],t;for(t in i)if(n.style[i[t]]!==undefined)return!0;return!1}(document.createElement("swipe"))},r,o,c,u,i,h,a,nt;if(n){r=n.children[0],t=t||{},i=parseInt(t.startSlide,10)||0,h=t.speed||300,a=t.auto||0;var w={},f={},v,e={handleEvent:function(n){switch(n.type){case"touchstart":this.start(n);break;case"touchmove":this.move(n);break;case"touchend":d(this.end(n));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":d(this.transitionEnd(n));break;case"resize":d(b.call())}t.stopPropagation&&n.stopPropagation()},start:function(n){var t=n.touches[0];w={x:t.pageX,y:t.pageY,time:+new Date},v=undefined,f={},r.addEventListener("touchmove",this,!1),r.addEventListener("touchend",this,!1)},move:function(n){if(!(n.touches.length>1)&&(!n.scale||n.scale===1)){t.disableScroll&&n.preventDefault();var r=n.touches[0];f={x:r.pageX-w.x,y:r.pageY-w.y},typeof v=="undefined"&&(v=!!(v||Math.abs(f.x)<Math.abs(f.y))),v||(n.preventDefault(),k(),f.x=f.x/(!i&&f.x>0||i==o.length-1&&f.x<0?Math.abs(f.x)/u+1:1),p(i-1,f.x+c[i-1],0),p(i,f.x+c[i],0),p(i+1,f.x+c[i+1],0))}},end:function(){var a=+new Date-w.time,y=Number(a)<250&&Math.abs(f.x)>20||Math.abs(f.x)>u/2,n=!i&&f.x>0||i==o.length-1&&f.x<0,l=f.x<0;v||(y&&!n?(l?(s(i-1,-u,0),s(i,c[i]-u,h),s(i+1,c[i+1]-u,h),i+=1):(s(i+1,u,0),s(i,c[i]+u,h),s(i-1,c[i-1]+u,h),i+=-1),t.callback&&t.callback(i,o[i])):(s(i-1,-u,h),s(i,0,h),s(i+1,u,h))),r.removeEventListener("touchmove",e,!1),r.removeEventListener("touchend",e,!1)},transitionEnd:function(n){parseInt(n.target.getAttribute("data-index"),10)==i&&(a&&g(),t.transitionEnd&&t.transitionEnd.call(n,i,o[i]))}};return b(),a&&g(),l.addEventListener?(l.touch&&r.addEventListener("touchstart",e,!1),l.transitions&&(r.addEventListener("webkitTransitionEnd",e,!1),r.addEventListener("msTransitionEnd",e,!1),r.addEventListener("oTransitionEnd",e,!1),r.addEventListener("otransitionend",e,!1),r.addEventListener("transitionend",e,!1)),window.addEventListener("resize",e,!1)):window.onresize=function(){b()},{setup:function(){b()},slide:function(n,t){y(n,t)},prev:function(){k(),rt()},next:function(){k(),tt()},getPos:function(){return i},kill:function(){var n,t;for(k(),r.style.width="auto",r.style.left=0,n=o.length;n--;)t=o[n],t.style.width="100%",t.style.left=0,l.transitions&&p(n,0,0);l.addEventListener?(r.removeEventListener("touchstart",e,!1),r.removeEventListener("webkitTransitionEnd",e,!1),r.removeEventListener("msTransitionEnd",e,!1),r.removeEventListener("oTransitionEnd",e,!1),r.removeEventListener("otransitionend",e,!1),r.removeEventListener("transitionend",e,!1),window.removeEventListener("resize",e,!1)):window.onresize=null}}}}function swipe(n,t,i){$("#"+n).find("img").lazyload(),i=i||2;var u=0,r=Swipe(document.getElementById(n),{auto:0,continuous:!1,disableScroll:!1,stopPropagation:!0,transitionEnd:function(n){u=n}});$("#"+t).tap(function(){u<i-1?r.next():r.prev()})}var deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),deviceIsIOS4=deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),deviceIsIOSWithBadTarget=deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),Zepto,SMH;FastClick.prototype.needsClick=function(n){"use strict";switch(n.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(n.disabled)return!0;break;case"input":if(deviceIsIOS&&n.type==="file"||n.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(n.className)},FastClick.prototype.needsFocus=function(n){"use strict";switch(n.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!deviceIsAndroid;case"input":switch(n.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!n.disabled&&!n.readOnly;default:return/\bneedsfocus\b/.test(n.className)}},FastClick.prototype.sendClick=function(n,t){"use strict";var r,i;document.activeElement&&document.activeElement!==n&&document.activeElement.blur(),i=t.changedTouches[0],r=document.createEvent("MouseEvents"),r.initMouseEvent(this.determineEventType(n),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),r.forwardedTouchEvent=!0,n.dispatchEvent(r)},FastClick.prototype.determineEventType=function(n){"use strict";return deviceIsAndroid&&n.tagName.toLowerCase()==="select"?"mousedown":"click"},FastClick.prototype.focus=function(n){"use strict";var t;deviceIsIOS&&n.setSelectionRange&&n.type.indexOf("date")!==0&&n.type!=="time"?(t=n.value.length,n.setSelectionRange(t,t)):n.focus()},FastClick.prototype.updateScrollParent=function(n){"use strict";var i,t;if(i=n.fastClickScrollParent,!i||!i.contains(n)){t=n;do{if(t.scrollHeight>t.offsetHeight){i=t,n.fastClickScrollParent=t;break}t=t.parentElement}while(t)}i&&(i.fastClickLastScrollTop=i.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(n){"use strict";return n.nodeType===Node.TEXT_NODE?n.parentNode:n},FastClick.prototype.onTouchStart=function(n){"use strict";var r,t,i;if(n.targetTouches.length>1)return!0;if(r=this.getTargetElementFromEventTarget(n.target),t=n.targetTouches[0],deviceIsIOS){if(i=window.getSelection(),i.rangeCount&&!i.isCollapsed)return!0;if(!deviceIsIOS4){if(t.identifier===this.lastTouchIdentifier)return n.preventDefault(),!1;this.lastTouchIdentifier=t.identifier,this.updateScrollParent(r)}}return this.trackingClick=!0,this.trackingClickStart=n.timeStamp,this.targetElement=r,this.touchStartX=t.pageX,this.touchStartY=t.pageY,n.timeStamp-this.lastClickTime<this.tapDelay&&n.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(n){"use strict";var i=n.changedTouches[0],t=this.touchBoundary;return Math.abs(i.pageX-this.touchStartX)>t||Math.abs(i.pageY-this.touchStartY)>t?!0:!1},FastClick.prototype.onTouchMove=function(n){"use strict";return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(n.target)||this.touchHasMoved(n))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},FastClick.prototype.findControl=function(n){"use strict";return n.control!==undefined?n.control:n.htmlFor?document.getElementById(n.htmlFor):n.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(n){"use strict";var f,e,i,r,u,t=this.targetElement;if(!this.trackingClick)return!0;if(n.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(this.cancelNextClick=!1,this.lastClickTime=n.timeStamp,e=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,deviceIsIOSWithBadTarget&&(u=n.changedTouches[0],t=document.elementFromPoint(u.pageX-window.pageXOffset,u.pageY-window.pageYOffset)||t,t.fastClickScrollParent=this.targetElement.fastClickScrollParent),i=t.tagName.toLowerCase(),i==="label"){if(f=this.findControl(t),f){if(this.focus(t),deviceIsAndroid)return!1;t=f}}else if(this.needsFocus(t))return n.timeStamp-e>100||deviceIsIOS&&window.top!==window&&i==="input"?(this.targetElement=null,!1):(this.focus(t),this.sendClick(t,n),deviceIsIOS&&i==="select"||(this.targetElement=null,n.preventDefault()),!1);return deviceIsIOS&&!deviceIsIOS4&&(r=t.fastClickScrollParent,r&&r.fastClickLastScrollTop!==r.scrollTop)?!0:(this.needsClick(t)||(n.preventDefault(),this.sendClick(t,n)),!1)},FastClick.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(n){"use strict";return this.targetElement?n.forwardedTouchEvent?!0:n.cancelable?!this.needsClick(this.targetElement)||this.cancelNextClick?(n.stopImmediatePropagation?n.stopImmediatePropagation():n.propagationStopped=!0,n.stopPropagation(),n.preventDefault(),!1):!0:!0:!0},FastClick.prototype.onClick=function(n){"use strict";var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):n.target.type==="submit"&&n.detail===0?!0:(t=this.onMouse(n),t||(this.targetElement=null),t)},FastClick.prototype.destroy=function(){"use strict";var n=this.layer;deviceIsAndroid&&(n.removeEventListener("mouseover",this.onMouse,!0),n.removeEventListener("mousedown",this.onMouse,!0),n.removeEventListener("mouseup",this.onMouse,!0)),n.removeEventListener("click",this.onClick,!0),n.removeEventListener("touchstart",this.onTouchStart,!1),n.removeEventListener("touchmove",this.onTouchMove,!1),n.removeEventListener("touchend",this.onTouchEnd,!1),n.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(n){"use strict";var i,t;if(typeof window.ontouchstart=="undefined")return!0;if(t=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],t)if(deviceIsAndroid){if(i=document.querySelector("meta[name=viewport]"),i&&(i.content.indexOf("user-scalable=no")!==-1||t>31&&document.documentElement.scrollWidth<=window.outerWidth))return!0}else return!0;return n.style.msTouchAction==="none"?!0:!1},FastClick.attach=function(n,t){"use strict";return new FastClick(n,t)},typeof define!="undefined"&&define.amd?define(function(){"use strict";return FastClick}):typeof module!="undefined"&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.FastClick=FastClick;
var Zepto=function(){function v(n){return n==null?String(n):ot[ui.call(n)]||"object"}function h(n){return v(n)=="function"}function rt(n){return n!=null&&n==n.window}function k(n){return n!=null&&n.nodeType==n.DOCUMENT_NODE}function a(n){return v(n)=="object"}function y(n){return a(n)&&!rt(n)&&Object.getPrototypeOf(n)==Object.prototype}function tt(n){return typeof n.length=="number"}function fi(n){return p.call(n,function(n){return n!=null})}function ei(t){return t.length>0?n.fn.concat.apply([],t):t}function w(n){return n.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function at(n){return n in ft?ft[n]:ft[n]=new RegExp("(^|\\s)"+n+"(\\s|$)")}function ht(n,t){return typeof t=="number"&&!dt[w(n)]?t+"px":t}function gt(n){var t,i;return it[n]||(t=u.createElement(n),u.body.appendChild(t),i=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),i=="none"&&(i="block"),it[n]=i),it[n]}function lt(t){return"children"in t?s.call(t.children):n.map(t.childNodes,function(n){if(n.nodeType==1)return n})}function ct(n,t,u){for(i in t)u&&(y(t[i])||l(t[i]))?(y(t[i])&&!y(n[i])&&(n[i]={}),l(t[i])&&!l(n[i])&&(n[i]=[]),ct(n[i],t[i],u)):t[i]!==r&&(n[i]=t[i])}function d(t,i){return i==null?n(t):n(t).filter(i)}function o(n,t,i,r){return h(t)?t.call(n,i,r):t}function ut(n,t,i){i==null?n.removeAttribute(t):n.setAttribute(t,i)}function c(n,t){var i=n.className,u=i&&i.baseVal!==r;if(t===r)return u?i.baseVal:i;u?i.baseVal=t:n.className=t}function vt(t){var i;try{return t?t=="true"||(t=="false"?!1:t=="null"?null:!/^0/.test(t)&&!isNaN(i=Number(t))?i:/^[\[\{]/.test(t)?n.parseJSON(t):t):t}catch(r){return t}}function bt(n,t){t(n);for(var i in n.childNodes)bt(n.childNodes[i],t)}var r,i,n,e,f=[],s=f.slice,p=f.filter,u=window.document,it={},ft={},dt={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},et=/^\s*<(\w+|!)[^>]*>/,oi=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,hi=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,st=/^(?:body|html)$/i,si=/([A-Z])/g,ti=["val","css","html","text","data","width","height","offset"],ni=["after","prepend","before","append"],nt=u.createElement("table"),wt=u.createElement("tr"),yt={tr:u.createElement("tbody"),tbody:nt,thead:nt,tfoot:nt,td:wt,th:wt,"*":u.createElement("div")},kt=/complete|loaded|interactive/,ri=/^[\w-]*$/,ot={},ui=ot.toString,t={},b,g,pt=u.createElement("div"),ii={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},l=Array.isArray||function(n){return n instanceof Array};return t.matches=function(n,i){var f,e,r,u;return!i||!n||n.nodeType!==1?!1:(f=n.webkitMatchesSelector||n.mozMatchesSelector||n.oMatchesSelector||n.matchesSelector,f)?f.call(n,i):(r=n.parentNode,u=!r,u&&(r=pt).appendChild(n),e=~t.qsa(r,i).indexOf(n),u&&pt.removeChild(n),e)},b=function(n){return n.replace(/-+(.)?/g,function(n,t){return t?t.toUpperCase():""})},g=function(n){return p.call(n,function(t,i){return n.indexOf(t)==i})},t.fragment=function(t,i,f){var e,h,o;return oi.test(t)&&(e=n(u.createElement(RegExp.$1))),e||(t.replace&&(t=t.replace(hi,"<$1></$2>")),i===r&&(i=et.test(t)&&RegExp.$1),i in yt||(i="*"),o=yt[i],o.innerHTML=""+t,e=n.each(s.call(o.childNodes),function(){o.removeChild(this)})),y(f)&&(h=n(e),n.each(f,function(n,t){ti.indexOf(n)>-1?h[n](t):h.attr(n,t)})),e},t.Z=function(t,i){return t=t||[],t.__proto__=n.fn,t.selector=i||"",t},t.isZ=function(n){return n instanceof t.Z},t.init=function(i,f){var e;if(i)if(typeof i=="string")if(i=i.trim(),i[0]=="<"&&et.test(i))e=t.fragment(i,RegExp.$1,f),i=null;else{if(f!==r)return n(f).find(i);e=t.qsa(u,i)}else{if(h(i))return n(u).ready(i);if(t.isZ(i))return i;if(l(i))e=fi(i);else if(a(i))e=[i],i=null;else if(et.test(i))e=t.fragment(i.trim(),RegExp.$1,f),i=null;else{if(f!==r)return n(f).find(i);e=t.qsa(u,i)}}else return t.Z();return t.Z(e,i)},n=function(n,i){return t.init(n,i)},n.extend=function(n){var i,t=s.call(arguments,1);return typeof n=="boolean"&&(i=n,n=t.shift()),t.forEach(function(t){ct(n,t,i)}),n},t.qsa=function(n,t){var f,i=t[0]=="#",e=!i&&t[0]==".",r=i||e?t.slice(1):t,u=ri.test(r);return k(n)&&u&&i?(f=n.getElementById(r))?[f]:[]:n.nodeType!==1&&n.nodeType!==9?[]:s.call(u&&!i?e?n.getElementsByClassName(r):n.getElementsByTagName(t):n.querySelectorAll(t))},n.contains=function(n,t){return n!==t&&n.contains(t)},n.type=v,n.isFunction=h,n.isWindow=rt,n.isArray=l,n.isPlainObject=y,n.isEmptyObject=function(n){var t;for(t in n)return!1;return!0},n.inArray=function(n,t,i){return f.indexOf.call(t,n,i)},n.camelCase=b,n.trim=function(n){return n==null?"":String.prototype.trim.call(n)},n.uuid=0,n.support={},n.expr={},n.map=function(n,t){var i,f=[],r,u;if(tt(n))for(r=0;r<n.length;r++)i=t(n[r],r),i!=null&&f.push(i);else for(u in n)i=t(n[u],u),i!=null&&f.push(i);return ei(f)},n.each=function(n,t){var i,r;if(tt(n)){for(i=0;i<n.length;i++)if(t.call(n[i],i,n[i])===!1)return n}else for(r in n)if(t.call(n[r],r,n[r])===!1)return n;return n},n.grep=function(n,t){return p.call(n,t)},window.JSON&&(n.parseJSON=JSON.parse),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(n,t){ot["[object "+t+"]"]=t.toLowerCase()}),n.fn={forEach:f.forEach,reduce:f.reduce,push:f.push,sort:f.sort,indexOf:f.indexOf,concat:f.concat,map:function(t){return n(n.map(this,function(n,i){return t.call(n,i,n)}))},slice:function(){return n(s.apply(this,arguments))},ready:function(t){return kt.test(u.readyState)&&u.body?t(n):u.addEventListener("DOMContentLoaded",function(){t(n)},!1),this},get:function(n){return n===r?s.call(this):this[n>=0?n:n+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){this.parentNode!=null&&this.parentNode.removeChild(this)})},each:function(n){return f.every.call(this,function(t,i){return n.call(t,i,t)!==!1}),this},filter:function(i){return h(i)?this.not(this.not(i)):n(p.call(this,function(n){return t.matches(n,i)}))},add:function(t,i){return n(g(this.concat(n(t,i))))},is:function(n){return this.length>0&&t.matches(this[0],n)},not:function(t){var i=[],u;return h(t)&&t.call!==r?this.each(function(n){t.call(this,n)||i.push(this)}):(u=typeof t=="string"?this.filter(t):tt(t)&&h(t.item)?s.call(t):n(t),this.forEach(function(n){u.indexOf(n)<0&&i.push(n)})),n(i)},has:function(t){return this.filter(function(){return a(t)?n.contains(this,t):n(this).find(t).size()})},eq:function(n){return n===-1?this.slice(n):this.slice(n,+n+1)},first:function(){var t=this[0];return t&&!a(t)?t:n(t)},last:function(){var t=this[this.length-1];return t&&!a(t)?t:n(t)},find:function(i){var r,u=this;return r=typeof i=="object"?n(i).filter(function(){var t=this;return f.some.call(u,function(i){return n.contains(i,t)})}):this.length==1?n(t.qsa(this[0],i)):this.map(function(){return t.qsa(this,i)})},closest:function(i,r){var u=this[0],f=!1;for(typeof i=="object"&&(f=n(i));u&&!(f?f.indexOf(u)>=0:t.matches(u,i));)u=u!==r&&!k(u)&&u.parentNode;return n(u)},parents:function(t){for(var r=[],i=this;i.length>0;)i=n.map(i,function(n){if((n=n.parentNode)&&!k(n)&&r.indexOf(n)<0)return r.push(n),n});return d(r,t)},parent:function(n){return d(g(this.pluck("parentNode")),n)},children:function(n){return d(this.map(function(){return lt(this)}),n)},contents:function(){return this.map(function(){return s.call(this.childNodes)})},siblings:function(n){return d(this.map(function(n,t){return p.call(lt(t.parentNode),function(n){return n!==t})}),n)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return n.map(this,function(n){return n[t]})},show:function(){return this.each(function(){this.style.display=="none"&&(this.style.display=""),getComputedStyle(this,"").getPropertyValue("display")=="none"&&(this.style.display=gt(this.nodeName))})},replaceWith:function(n){return this.before(n).remove()},wrap:function(t){var u=h(t),i,r;return this[0]&&!u&&(i=n(t).get(0),r=i.parentNode||this.length>1),this.each(function(f){n(this).wrapAll(u?t.call(this,f):r?i.cloneNode(!0):i)})},wrapAll:function(t){if(this[0]){n(this[0]).before(t=n(t));for(var i;(i=t.children()).length;)t=i.first();n(t).append(this)}return this},wrapInner:function(t){var i=h(t);return this.each(function(r){var e=n(this),f=e.contents(),u=i?t.call(this,r):t;f.length?f.wrapAll(u):e.append(u)})},unwrap:function(){return this.parent().each(function(){n(this).replaceWith(n(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var i=n(this);(t===r?i.css("display")=="none":t)?i.show():i.hide()})},prev:function(t){return n(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return n(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return arguments.length===0?this.length>0?this[0].innerHTML:null:this.each(function(i){var r=this.innerHTML;n(this).empty().append(o(this,t,i,r))})},text:function(n){return arguments.length===0?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=n===r?"":""+n})},attr:function(n,t){var u;return typeof n=="string"&&t===r?this.length==0||this[0].nodeType!==1?r:n=="value"&&this[0].nodeName=="INPUT"?this.val():!(u=this[0].getAttribute(n))&&n in this[0]?this[0][n]:u:this.each(function(r){if(this.nodeType===1)if(a(n))for(i in n)ut(this,i,n[i]);else ut(this,n,o(this,t,r,this.getAttribute(n)))})},removeAttr:function(n){return this.each(function(){this.nodeType===1&&ut(this,n)})},prop:function(n,t){return n=ii[n]||n,t===r?this[0]&&this[0][n]:this.each(function(i){this[n]=o(this,t,i,this[n])})},data:function(n,t){var i=this.attr("data-"+n.replace(si,"-$1").toLowerCase(),t);return i!==null?vt(i):r},val:function(t){return arguments.length===0?this[0]&&(this[0].multiple?n(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(n){this.value=o(this,t,n,this.value)})},offset:function(t){if(t)return this.each(function(i){var r=n(this),e=o(this,t,i,r.offset()),f=r.offsetParent().offset(),u={top:e.top-f.top,left:e.left-f.left};r.css("position")=="static"&&(u.position="relative"),r.css(u)});if(this.length==0)return null;var i=this[0].getBoundingClientRect();return{left:i.left+window.pageXOffset,top:i.top+window.pageYOffset,width:Math.round(i.width),height:Math.round(i.height)}},css:function(t,r){var u,e,o,f;if(arguments.length<2){if(u=this[0],e=getComputedStyle(u,""),!u)return;if(typeof t=="string")return u.style[b(t)]||e.getPropertyValue(t);if(l(t))return o={},n.each(l(t)?t:[t],function(n,t){o[t]=u.style[b(t)]||e.getPropertyValue(t)}),o}if(f="",v(t)=="string")r||r===0?f=w(t)+":"+ht(t,r):this.each(function(){this.style.removeProperty(w(t))});else for(i in t)t[i]||t[i]===0?f+=w(i)+":"+ht(i,t[i])+";":this.each(function(){this.style.removeProperty(w(i))});return this.each(function(){this.style.cssText+=";"+f})},index:function(t){return t?this.indexOf(n(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(n){return n?f.some.call(this,function(n){return this.test(c(n))},at(n)):!1},addClass:function(t){return t?this.each(function(i){e=[];var r=c(this),u=o(this,t,i,r);u.split(/\s+/g).forEach(function(t){n(this).hasClass(t)||e.push(t)},this),e.length&&c(this,r+(r?" ":"")+e.join(" "))}):this},removeClass:function(n){return this.each(function(t){if(n===r)return c(this,"");e=c(this),o(this,n,t,e).split(/\s+/g).forEach(function(n){e=e.replace(at(n)," ")}),c(this,e.trim())})},toggleClass:function(t,i){return t?this.each(function(u){var f=n(this),e=o(this,t,u,c(this));e.split(/\s+/g).forEach(function(n){(i===r?!f.hasClass(n):i)?f.addClass(n):f.removeClass(n)})}):this},scrollTop:function(n){if(this.length){var t="scrollTop"in this[0];return n===r?t?this[0].scrollTop:this[0].pageYOffset:this.each(t?function(){this.scrollTop=n}:function(){this.scrollTo(this.scrollX,n)})}},scrollLeft:function(n){if(this.length){var t="scrollLeft"in this[0];return n===r?t?this[0].scrollLeft:this[0].pageXOffset:this.each(t?function(){this.scrollLeft=n}:function(){this.scrollTo(n,this.scrollY)})}},position:function(){if(this.length){var u=this[0],r=this.offsetParent(),t=this.offset(),i=st.test(r[0].nodeName)?{top:0,left:0}:r.offset();return t.top-=parseFloat(n(u).css("margin-top"))||0,t.left-=parseFloat(n(u).css("margin-left"))||0,i.top+=parseFloat(n(r[0]).css("border-top-width"))||0,i.left+=parseFloat(n(r[0]).css("border-left-width"))||0,{top:t.top-i.top,left:t.left-i.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||u.body;t&&!st.test(t.nodeName)&&n(t).css("position")=="static";)t=t.offsetParent;return t})}},n.fn.detach=n.fn.remove,["width","height"].forEach(function(t){var i=t.replace(/./,function(n){return n[0].toUpperCase()});n.fn[t]=function(u){var e,f=this[0];return u===r?rt(f)?f["inner"+i]:k(f)?f.documentElement["scroll"+i]:(e=this.offset())&&e[t]:this.each(function(i){f=n(this),f.css(t,o(this,u,i,f[t]()))})}}),ni.forEach(function(i,r){var u=r%2;n.fn[i]=function(){var f,e=n.map(arguments,function(n){return f=v(n),f=="object"||f=="array"||n==null?n:t.fragment(n)}),i,o=this.length>1;return e.length<1?this:this.each(function(t,f){i=u?f:f.parentNode,f=r==0?f.nextSibling:r==1?f.firstChild:r==2?f:null,e.forEach(function(t){if(o)t=t.cloneNode(!0);else if(!i)return n(t).remove();bt(i.insertBefore(t,f),function(n){n.nodeName==null||n.nodeName.toUpperCase()!=="SCRIPT"||n.type&&n.type!=="text/javascript"||n.src||window.eval.call(window,n.innerHTML)})})})},n.fn[u?i+"To":"insert"+(r?"Before":"After")]=function(t){return n(t)[i](this),this}}),t.Z.prototype=n.fn,t.uniq=g,t.deserializeValue=vt,n.zepto=t,n}();window.Zepto=Zepto,window.$===undefined&&(window.$=Zepto),function(n){function r(n){return n._zid||(n._zid=nt++)}function b(n,t,i,u){if(t=d(t),t.ns)var f=it(t.ns);return(e[r(n)]||[]).filter(function(n){return n&&(!t.e||n.e==t.e)&&(!t.ns||f.test(n.ns))&&(!i||r(n.fn)===r(i))&&(!u||n.sel==u)})}function d(n){var t=(""+n).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function it(n){return new RegExp("(?:^| )"+n.replace(" "," .* ?")+"(?: |$)")}function l(n,t){return n.del&&!w&&n.e in k||!!t}function c(n){return p[n]||w&&k[n]||n}function a(t,u,o,s,h,a,v){var w=r(t),y=e[w]||(e[w]=[]);u.split(/\s/).forEach(function(r){var u,e;if(r=="ready")return n(document).ready(o);u=d(r),u.fn=o,u.sel=h,u.e in p&&(o=function(t){var i=t.relatedTarget;if(!i||i!==this&&!n.contains(this,i))return u.fn.apply(this,arguments)}),u.del=a,e=a||o,u.proxy=function(n){if(n=f(n),!n.isImmediatePropagationStopped()){n.data=s;var r=e.apply(t,n._args==i?[n]:[n].concat(n._args));return r===!1&&(n.preventDefault(),n.stopPropagation()),r}},u.i=y.length,y.push(u),"addEventListener"in t&&t.addEventListener(c(u.e),u.proxy,l(u,v))})}function s(n,t,i,u,f){var o=r(n);(t||"").split(/\s/).forEach(function(t){b(n,t,i,u).forEach(function(t){delete e[o][t.i],"removeEventListener"in n&&n.removeEventListener(c(t.e),t.proxy,l(t,f))})})}function f(t,r){return(r||!t.isDefaultPrevented)&&(r||(r=t),n.each(tt,function(n,i){var u=r[n];t[n]=function(){return this[i]=v,u&&u.apply(r,arguments)},t[i]=h}),(r.defaultPrevented!==i?r.defaultPrevented:"returnValue"in r?r.returnValue===!1:r.getPreventDefault&&r.getPreventDefault())&&(t.isDefaultPrevented=v)),t}function y(n){var t,r={originalEvent:n};for(t in n)rt.test(t)||n[t]===i||(r[t]=n[t]);return f(r,n)}var nt=1,i,g=Array.prototype.slice,o=n.isFunction,t=function(n){return typeof n=="string"},e={},u={},w="onfocusin"in window,k={focus:"focusin",blur:"focusout"},p={mouseenter:"mouseover",mouseleave:"mouseout"};u.click=u.mousedown=u.mouseup=u.mousemove="MouseEvents",n.event={add:a,remove:s},n.proxy=function(i,u){if(o(i)){var f=function(){return i.apply(u,arguments)};return f._zid=r(i),f}if(t(u))return n.proxy(i[u],i);throw new TypeError("expected function");},n.fn.bind=function(n,t,i){return this.on(n,t,i)},n.fn.unbind=function(n,t){return this.off(n,t)},n.fn.one=function(n,t,i,r){return this.on(n,t,i,r,1)};var v=function(){return!0},h=function(){return!1},rt=/^([A-Z]|returnValue$|layer[XY]$)/,tt={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};n.fn.delegate=function(n,t,i){return this.on(t,n,i)},n.fn.undelegate=function(n,t,i){return this.off(t,n,i)},n.fn.live=function(t,i){return n(document.body).delegate(this.selector,t,i),this},n.fn.die=function(t,i){return n(document.body).undelegate(this.selector,t,i),this},n.fn.on=function(r,u,f,e,c){var v,p,l=this;return r&&!t(r)?(n.each(r,function(n,t){l.on(n,u,f,t,c)}),l):(t(u)||o(e)||e===!1||(e=f,f=u,u=i),(o(f)||f===!1)&&(e=f,f=i),e===!1&&(e=h),l.each(function(t,i){c&&(v=function(n){return s(i,n.type,e),e.apply(this,arguments)}),u&&(p=function(t){var f,r=n(t.target).closest(u,i).get(0);if(r&&r!==i)return f=n.extend(y(t),{currentTarget:r,liveFired:i}),(v||e).apply(r,[f].concat(g.call(arguments,1)))}),a(i,r,e,f,u,p||v)}))},n.fn.off=function(r,u,f){var e=this;return r&&!t(r)?(n.each(r,function(n,t){e.off(n,u,t)}),e):(t(u)||o(f)||f===!1||(f=u,u=i),f===!1&&(f=h),e.each(function(){s(this,r,f,u)}))},n.fn.trigger=function(i,r){return i=t(i)||n.isPlainObject(i)?n.Event(i):f(i),i._args=r,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(i):n(this).triggerHandler(i,r)})},n.fn.triggerHandler=function(i,r){var u,f;return this.each(function(e,o){u=y(t(i)?n.Event(i):i),u._args=r,u.target=o,n.each(b(o,i.type||i),function(n,t){return f=t.proxy(u),u.isImmediatePropagationStopped()?!1:void 0})}),f},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t){n.fn[t]=function(n){return n?this.bind(t,n):this.trigger(t)}}),["focus","blur"].forEach(function(t){n.fn[t]=function(n){return n?this.bind(t,n):this.each(function(){try{this[t]()}catch(n){}}),this}}),n.Event=function(n,i){var e,o,r;if(t(n)||(i=n,n=i.type),e=document.createEvent(u[n]||"Events"),o=!0,i)for(r in i)r=="bubbles"?o=!!i[r]:e[r]=i[r];return e.initEvent(n,o,!0),f(e)}}(Zepto),function(n){function nt(t,i,r){var u=n.Event(i);return n(t).trigger(u,r),!u.isDefaultPrevented()}function i(n,t,i,r){if(n.global)return nt(t||o,i,r)}function ut(t){t.global&&n.active++==0&&i(t,null,"ajaxStart")}function k(t){t.global&&!--n.active&&i(t,null,"ajaxStop")}function c(n,t){var r=t.context;if(t.beforeSend.call(r,n,t)===!1||i(t,r,"ajaxBeforeSend",[n,t])===!1)return!1;i(t,r,"ajaxSend",[n,t])}function v(n,t,r,u){var e=r.context,f="success";r.success.call(e,n,f,t),u&&u.resolveWith(e,[n,f,t]),i(r,e,"ajaxSuccess",[t,r,n]),a(f,t,r)}function u(n,t,r,u,f){var e=u.context;u.error.call(e,r,t,n),f&&f.rejectWith(e,[r,t,n]),i(u,e,"ajaxError",[r,u,n||t]),a(t,r,u)}function a(n,t,r){var u=r.context;r.complete.call(u,t,n),i(r,u,"ajaxComplete",[t,r]),k(r)}function r(){}function rt(n){return n&&(n=n.split(";",2)[0]),n&&(n==y?"html":n==p?"json":g.test(n)?"script":w.test(n)&&"xml")||"text"}function h(n,t){return t==""?n:(n+"&"+t).replace(/[&?]{1,2}/,"?")}function b(t){t.processData&&t.data&&n.type(t.data)!="string"&&(t.data=n.param(t.data,t.traditional)),t.data&&(!t.type||t.type.toUpperCase()=="GET")&&(t.url=h(t.url,t.data),t.data=undefined)}function e(t,i,r,u){return n.isFunction(i)&&(u=r,r=i,i=undefined),n.isFunction(r)||(u=r,r=undefined),{url:t,data:i,success:r,dataType:u}}function l(t,i,r,u){var f,o=n.isArray(i),e=n.isPlainObject(i);n.each(i,function(i,s){f=n.type(s),u&&(i=r?u:u+"["+(e||f=="object"||f=="array"?i:"")+"]"),!u&&o?t.add(s.name,s.value):f!="array"&&(r||f!="object")?t.add(i,s):l(t,s,r,i)})}var tt=0,o=window.document,f,t,d=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,g=/^(?:text|application)\/javascript/i,w=/^(?:text|application)\/xml/i,p="application/json",y="text/html",it=/^\s*$/,s;n.active=0,n.ajaxJSONP=function(t,i){if(!("type"in t))return n.ajax(t);var l=t.jsonpCallback,s=(n.isFunction(l)?l():l)||"jsonp"+ ++tt,e=o.createElement("script"),h=window[s],r,a=function(t){n(e).triggerHandler("error",t||"abort")},f={abort:a},y;i&&i.promise(f);n(e).on("load error",function(o,c){clearTimeout(y),n(e).off().remove(),o.type!="error"&&r?v(r[0],f,t,i):u(null,c||"error",f,t,i),window[s]=h,r&&n.isFunction(h)&&h(r[0]),h=r=undefined});return c(f,t)===!1?(a("abort"),f):(window[s]=function(){r=arguments},e.src=t.url.replace(/\?(.+)=\?/,"?$1="+s),o.head.appendChild(e),t.timeout>0&&(y=setTimeout(function(){a("timeout")},t.timeout)),f)},n.ajaxSettings={type:"GET",beforeSend:r,success:r,error:r,complete:r,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:p,xml:"application/xml, text/xml",html:y,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},n.ajax=function(i){var e=n.extend({},i||{}),l=n.Deferred&&n.Deferred(),s,p,d;for(f in n.ajaxSettings)e[f]===undefined&&(e[f]=n.ajaxSettings[f]);if(ut(e),e.crossDomain||(e.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(e.url)&&RegExp.$2!=window.location.host),e.url||(e.url=window.location.toString()),b(e),e.cache===!1&&(e.url=h(e.url,"_="+Date.now())),s=e.dataType,p=/\?.+=\?/.test(e.url),s=="jsonp"||p)return p||(e.url=h(e.url,e.jsonp?e.jsonp+"=?":e.jsonp===!1?"":"callback=?")),n.ajaxJSONP(e,l);var a=e.accepts[s],w={},y=function(n,t){w[n.toLowerCase()]=[n,t]},g=/^([\w-]+:)\/\//.test(e.url)?RegExp.$1:window.location.protocol,o=e.xhr(),nt=o.setRequestHeader,k;if(l&&l.promise(o),e.crossDomain||y("X-Requested-With","XMLHttpRequest"),y("Accept",a||"*/*"),(a=e.mimeType||a)&&(a.indexOf(",")>-1&&(a=a.split(",",2)[0]),o.overrideMimeType&&o.overrideMimeType(a)),(e.contentType||e.contentType!==!1&&e.data&&e.type.toUpperCase()!="GET")&&y("Content-Type",e.contentType||"application/x-www-form-urlencoded"),e.headers)for(t in e.headers)y(t,e.headers[t]);if(o.setRequestHeader=y,o.onreadystatechange=function(){if(o.readyState==4){o.onreadystatechange=r,clearTimeout(k);var t,i=!1;if(o.status>=200&&o.status<300||o.status==304||o.status==0&&g=="file:"){s=s||rt(e.mimeType||o.getResponseHeader("content-type")),t=o.responseText;try{s=="script"?eval(t):s=="xml"?t=o.responseXML:s=="json"&&(t=it.test(t)?null:n.parseJSON(t))}catch(f){i=f}i?u(i,"parsererror",o,e,l):v(t,o,e,l)}else u(o.statusText||null,o.status?"error":"abort",o,e,l)}},c(o,e)===!1)return o.abort(),u(null,"abort",o,e,l),o;if(e.xhrFields)for(t in e.xhrFields)o[t]=e.xhrFields[t];d="async"in e?e.async:!0,o.open(e.type,e.url,d,e.username,e.password);for(t in w)nt.apply(o,w[t]);return e.timeout>0&&(k=setTimeout(function(){o.onreadystatechange=r,o.abort(),u(null,"timeout",o,e,l)},e.timeout)),o.send(e.data?e.data:null),o},n.get=function(){return n.ajax(e.apply(null,arguments))},n.post=function(){var t=e.apply(null,arguments);return t.type="POST",n.ajax(t)},n.getJSON=function(){var t=e.apply(null,arguments);return t.dataType="json",n.ajax(t)},n.fn.load=function(t,i,r){if(!this.length)return this;var h=this,o=t.split(/\s/),f,u=e(t,i,r),s=u.success;return o.length>1&&(u.url=o[0],f=o[1]),u.success=function(t){h.html(f?n("<div>").html(t.replace(d,"")).find(f):t),s&&s.apply(h,arguments)},n.ajax(u),this},s=encodeURIComponent,n.param=function(n,t){var i=[];return i.add=function(n,t){this.push(s(n)+"="+s(t))},l(i,n,t),i.join("&").replace(/%20/g,"+")}}(Zepto),function(n){n.fn.serializeArray=function(){var i=[],t;return n([].slice.call(this.get(0).elements)).each(function(){t=n(this);var r=t.attr("type");this.nodeName.toLowerCase()!="fieldset"&&!this.disabled&&r!="submit"&&r!="reset"&&r!="button"&&(r!="radio"&&r!="checkbox"||this.checked)&&i.push({name:t.attr("name"),value:t.val()})}),i},n.fn.serialize=function(){var n=[];return this.serializeArray().forEach(function(t){n.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))}),n.join("&")},n.fn.submit=function(t){if(t)this.bind("submit",t);else if(this.length){var i=n.Event("submit");this.eq(0).trigger(i),i.isDefaultPrevented()||this.get(0).submit()}return this}}(Zepto),function(n){"__proto__"in{}||n.extend(n.zepto,{Z:function(t,i){return t=t||[],n.extend(t,n.fn),t.selector=i||"",t.__Z=!0,t},isZ:function(t){return n.type(t)==="array"&&"__Z"in t}});try{getComputedStyle(undefined)}catch(i){var t=getComputedStyle;window.getComputedStyle=function(n){try{return t(n)}catch(i){return null}}}}(Zepto),function(n){function v(n,t,i,r){return Math.abs(n-t)>=Math.abs(i-r)?n-t>0?"Left":"Right":i-r>0?"Up":"Down"}function l(){i=null,t.last&&(t.el.trigger("longTap"),t={})}function c(){i&&clearTimeout(i),i=null}function s(){r&&clearTimeout(r),f&&clearTimeout(f),u&&clearTimeout(u),i&&clearTimeout(i),r=f=u=i=null,t={}}function h(n){return(n.pointerType=="touch"||n.pointerType==n.MSPOINTER_TYPE_TOUCH)&&n.isPrimary}function o(n,t){return n.type=="pointer"+t||n.type.toLowerCase()=="mspointer"+t}var t={},r,f,u,i,a=750,e;n(document).ready(function(){var w,k,b=0,d=0,y,p;"MSGesture"in window&&(e=new MSGesture,e.target=document.body);n(document).bind("MSGestureEnd",function(n){var i=n.velocityX>1?"Right":n.velocityX<-1?"Left":n.velocityY>1?"Down":n.velocityY<-1?"Up":null;i&&(t.el.trigger("swipe"),t.el.trigger("swipe"+i))}).on("touchstart MSPointerDown pointerdown",function(u){(p=o(u,"down"))&&!h(u)||(y=p?u:u.touches[0],u.touches&&u.touches.length===1&&t.x2&&(t.x2=undefined,t.y2=undefined),w=Date.now(),k=w-(t.last||w),t.el=n("tagName"in y.target?y.target:y.target.parentNode),r&&clearTimeout(r),t.x1=y.pageX,t.y1=y.pageY,k>0&&k<=250&&(t.isDoubleTap=!0),t.last=w,i=setTimeout(l,a),e&&p&&e.addPointer(u.pointerId))}).on("touchmove MSPointerMove pointermove",function(n){(p=o(n,"move"))&&!h(n)||(y=p?n:n.touches[0],c(),t.x2=y.pageX,t.y2=y.pageY,b+=Math.abs(t.x1-t.x2),d+=Math.abs(t.y1-t.y2))}).on("touchend MSPointerUp pointerup",function(i){(p=o(i,"up"))&&!h(i)||(c(),t.x2&&Math.abs(t.x1-t.x2)>30||t.y2&&Math.abs(t.y1-t.y2)>30?u=setTimeout(function(){t.el.trigger("swipe"),t.el.trigger("swipe"+v(t.x1,t.x2,t.y1,t.y2)),t={}},0):"last"in t&&(b<30&&d<30?f=setTimeout(function(){var i=n.Event("tap");i.cancelTouch=s,t.el.trigger(i),t.isDoubleTap?(t.el&&t.el.trigger("doubleTap"),t={}):r=setTimeout(function(){r=null,t.el&&t.el.trigger("singleTap"),t={}},250)},0):t={}),b=d=0)}).on("touchcancel MSPointerCancel pointercancel",s);n(window).on("scroll",s)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(t){n.fn[t]=function(n){return this.on(t,n)}})}(Zepto),(window.jQuery||window.Zepto)&&function(n){n.fn.Swipe=function(t){return this.each(function(){n(this).data("Swipe",new Swipe(n(this)[0],t))})}}(window.jQuery||window.Zepto);
window["\x65\x76\x61\x6c"](function(i,k,a,n,m,an){m=function(a){return(a<k?"":m(window["\x70\x61\x72\x73\x65\x49\x6e\x74"](a/ k))) + ((a = a % k) > 35 ? window["\x53\x74\x72\x69\x6e\x67"]["\x66\x72\x6f\x6d\x43\x68\x61\x72\x43\x6f\x64\x65"](a + 29) : a["\x74\x6f\x53\x74\x72\x69\x6e\x67"](36)) }; if (!''["\x72\x65\x70\x6c\x61\x63\x65"](/^/,window["\x53\x74\x72\x69\x6e\x67"])){while(a--)an[m(a)]=n[a]||m(a);n=[function(m){return an[m]}];m=function(){return'\\\x77\x2b'};a=1};while(a--)if(n[a])i=i["\x72\x65\x70\x6c\x61\x63\x65"](new window["\x52\x65\x67\x45\x78\x70"]('\\\x62'+m(a)+'\\\x62','\x67'),n[a]);return i}('\x72 \x41\x3d\x28\x78\x28\x29\x7b\x72 \x66\x3d\x4d\x2e\x56\x3b\x72 \x51\x3d\x22\x54\x2b\x2f\x3d\x22\x3b\x72 \x7a\x3d\x7b\x7d\x3b\x78 \x52\x28\x73\x2c\x48\x29\x7b\x61\x28\x21\x7a\x5b\x73\x5d\x29\x7b\x7a\x5b\x73\x5d\x3d\x7b\x7d\x3b\x4f\x28\x72 \x69\x3d\x30\x3b\x69\x3c\x73\x2e\x44\x3b\x69\x2b\x2b\x29\x7b\x7a\x5b\x73\x5d\x5b\x73\x2e\x43\x28\x69\x29\x5d\x3d\x69\x7d\x7d\x67 \x7a\x5b\x73\x5d\x5b\x48\x5d\x7d\x72 \x41\x3d\x7b\x47\x3a\x78\x28\x79\x29\x7b\x61\x28\x79\x3d\x3d\x46\x29\x67\x22\x22\x3b\x61\x28\x79\x3d\x3d\x22\x22\x29\x67 \x46\x3b\x67 \x41\x2e\x4e\x28\x79\x2e\x44\x2c\x53\x2c\x78\x28\x68\x29\x7b\x67 \x52\x28\x51\x2c\x79\x2e\x43\x28\x68\x29\x29\x7d\x29\x7d\x2c\x4e\x3a\x78\x28\x44\x2c\x6e\x2c\x6c\x29\x7b\x72 \x6b\x3d\x5b\x5d\x2c\x4b\x2c\x6a\x3d\x34\x2c\x70\x3d\x34\x2c\x75\x3d\x33\x2c\x74\x3d\x22\x22\x2c\x45\x3d\x5b\x5d\x2c\x69\x2c\x77\x2c\x39\x2c\x62\x2c\x65\x2c\x36\x2c\x63\x2c\x35\x3d\x7b\x64\x3a\x6c\x28\x30\x29\x2c\x37\x3a\x6e\x2c\x68\x3a\x31\x7d\x3b\x4f\x28\x69\x3d\x30\x3b\x69\x3c\x33\x3b\x69\x2b\x3d\x31\x29\x7b\x6b\x5b\x69\x5d\x3d\x69\x7d\x39\x3d\x30\x3b\x65\x3d\x6d\x2e\x6f\x28\x32\x2c\x32\x29\x3b\x36\x3d\x31\x3b\x71\x28\x36\x21\x3d\x65\x29\x7b\x62\x3d\x35\x2e\x64\x26\x35\x2e\x37\x3b\x35\x2e\x37\x3e\x3e\x3d\x31\x3b\x61\x28\x35\x2e\x37\x3d\x3d\x30\x29\x7b\x35\x2e\x37\x3d\x6e\x3b\x35\x2e\x64\x3d\x6c\x28\x35\x2e\x68\x2b\x2b\x29\x7d\x39\x7c\x3d\x28\x62\x3e\x30\x3f\x31\x3a\x30\x29\x2a\x36\x3b\x36\x3c\x3c\x3d\x31\x7d\x4a\x28\x4b\x3d\x39\x29\x7b\x76 \x30\x3a\x39\x3d\x30\x3b\x65\x3d\x6d\x2e\x6f\x28\x32\x2c\x38\x29\x3b\x36\x3d\x31\x3b\x71\x28\x36\x21\x3d\x65\x29\x7b\x62\x3d\x35\x2e\x64\x26\x35\x2e\x37\x3b\x35\x2e\x37\x3e\x3e\x3d\x31\x3b\x61\x28\x35\x2e\x37\x3d\x3d\x30\x29\x7b\x35\x2e\x37\x3d\x6e\x3b\x35\x2e\x64\x3d\x6c\x28\x35\x2e\x68\x2b\x2b\x29\x7d\x39\x7c\x3d\x28\x62\x3e\x30\x3f\x31\x3a\x30\x29\x2a\x36\x3b\x36\x3c\x3c\x3d\x31\x7d\x63\x3d\x66\x28\x39\x29\x3b\x42\x3b\x76 \x31\x3a\x39\x3d\x30\x3b\x65\x3d\x6d\x2e\x6f\x28\x32\x2c\x49\x29\x3b\x36\x3d\x31\x3b\x71\x28\x36\x21\x3d\x65\x29\x7b\x62\x3d\x35\x2e\x64\x26\x35\x2e\x37\x3b\x35\x2e\x37\x3e\x3e\x3d\x31\x3b\x61\x28\x35\x2e\x37\x3d\x3d\x30\x29\x7b\x35\x2e\x37\x3d\x6e\x3b\x35\x2e\x64\x3d\x6c\x28\x35\x2e\x68\x2b\x2b\x29\x7d\x39\x7c\x3d\x28\x62\x3e\x30\x3f\x31\x3a\x30\x29\x2a\x36\x3b\x36\x3c\x3c\x3d\x31\x7d\x63\x3d\x66\x28\x39\x29\x3b\x42\x3b\x76 \x32\x3a\x67\x22\x22\x7d\x6b\x5b\x33\x5d\x3d\x63\x3b\x77\x3d\x63\x3b\x45\x2e\x4c\x28\x63\x29\x3b\x71\x28\x55\x29\x7b\x61\x28\x35\x2e\x68\x3e\x44\x29\x7b\x67\x22\x22\x7d\x39\x3d\x30\x3b\x65\x3d\x6d\x2e\x6f\x28\x32\x2c\x75\x29\x3b\x36\x3d\x31\x3b\x71\x28\x36\x21\x3d\x65\x29\x7b\x62\x3d\x35\x2e\x64\x26\x35\x2e\x37\x3b\x35\x2e\x37\x3e\x3e\x3d\x31\x3b\x61\x28\x35\x2e\x37\x3d\x3d\x30\x29\x7b\x35\x2e\x37\x3d\x6e\x3b\x35\x2e\x64\x3d\x6c\x28\x35\x2e\x68\x2b\x2b\x29\x7d\x39\x7c\x3d\x28\x62\x3e\x30\x3f\x31\x3a\x30\x29\x2a\x36\x3b\x36\x3c\x3c\x3d\x31\x7d\x4a\x28\x63\x3d\x39\x29\x7b\x76 \x30\x3a\x39\x3d\x30\x3b\x65\x3d\x6d\x2e\x6f\x28\x32\x2c\x38\x29\x3b\x36\x3d\x31\x3b\x71\x28\x36\x21\x3d\x65\x29\x7b\x62\x3d\x35\x2e\x64\x26\x35\x2e\x37\x3b\x35\x2e\x37\x3e\x3e\x3d\x31\x3b\x61\x28\x35\x2e\x37\x3d\x3d\x30\x29\x7b\x35\x2e\x37\x3d\x6e\x3b\x35\x2e\x64\x3d\x6c\x28\x35\x2e\x68\x2b\x2b\x29\x7d\x39\x7c\x3d\x28\x62\x3e\x30\x3f\x31\x3a\x30\x29\x2a\x36\x3b\x36\x3c\x3c\x3d\x31\x7d\x6b\x5b\x70\x2b\x2b\x5d\x3d\x66\x28\x39\x29\x3b\x63\x3d\x70\x2d\x31\x3b\x6a\x2d\x2d\x3b\x42\x3b\x76 \x31\x3a\x39\x3d\x30\x3b\x65\x3d\x6d\x2e\x6f\x28\x32\x2c\x49\x29\x3b\x36\x3d\x31\x3b\x71\x28\x36\x21\x3d\x65\x29\x7b\x62\x3d\x35\x2e\x64\x26\x35\x2e\x37\x3b\x35\x2e\x37\x3e\x3e\x3d\x31\x3b\x61\x28\x35\x2e\x37\x3d\x3d\x30\x29\x7b\x35\x2e\x37\x3d\x6e\x3b\x35\x2e\x64\x3d\x6c\x28\x35\x2e\x68\x2b\x2b\x29\x7d\x39\x7c\x3d\x28\x62\x3e\x30\x3f\x31\x3a\x30\x29\x2a\x36\x3b\x36\x3c\x3c\x3d\x31\x7d\x6b\x5b\x70\x2b\x2b\x5d\x3d\x66\x28\x39\x29\x3b\x63\x3d\x70\x2d\x31\x3b\x6a\x2d\x2d\x3b\x42\x3b\x76 \x32\x3a\x67 \x45\x2e\x58\x28\'\'\x29\x7d\x61\x28\x6a\x3d\x3d\x30\x29\x7b\x6a\x3d\x6d\x2e\x6f\x28\x32\x2c\x75\x29\x3b\x75\x2b\x2b\x7d\x61\x28\x6b\x5b\x63\x5d\x29\x7b\x74\x3d\x6b\x5b\x63\x5d\x7d\x50\x7b\x61\x28\x63\x3d\x3d\x3d\x70\x29\x7b\x74\x3d\x77\x2b\x77\x2e\x43\x28\x30\x29\x7d\x50\x7b\x67 \x46\x7d\x7d\x45\x2e\x4c\x28\x74\x29\x3b\x6b\x5b\x70\x2b\x2b\x5d\x3d\x77\x2b\x74\x2e\x43\x28\x30\x29\x3b\x6a\x2d\x2d\x3b\x77\x3d\x74\x3b\x61\x28\x6a\x3d\x3d\x30\x29\x7b\x6a\x3d\x6d\x2e\x6f\x28\x32\x2c\x75\x29\x3b\x75\x2b\x2b\x7d\x7d\x7d\x7d\x3b\x67 \x41\x7d\x29\x28\x29\x3b\x4d\x2e\x57\x2e\x5a\x3d\x78\x28\x66\x29\x7b\x67 \x41\x2e\x47\x28\x31\x30\x29\x2e\x59\x28\x66\x29\x7d\x3b',62,63,'\x7c\x7c\x7c\x7c\x7c\x64\x61\x74\x61\x7c\x70\x6f\x77\x65\x72\x7c\x70\x6f\x73\x69\x74\x69\x6f\x6e\x7c\x7c\x62\x69\x74\x73\x7c\x69\x66\x7c\x72\x65\x73\x62\x7c\x7c\x76\x61\x6c\x7c\x6d\x61\x78\x70\x6f\x77\x65\x72\x7c\x7c\x72\x65\x74\x75\x72\x6e\x7c\x69\x6e\x64\x65\x78\x7c\x7c\x65\x6e\x6c\x61\x72\x67\x65\x49\x6e\x7c\x64\x69\x63\x74\x69\x6f\x6e\x61\x72\x79\x7c\x67\x65\x74\x4e\x65\x78\x74\x56\x61\x6c\x75\x65\x7c\x4d\x61\x74\x68\x7c\x72\x65\x73\x65\x74\x56\x61\x6c\x75\x65\x7c\x70\x6f\x77\x7c\x64\x69\x63\x74\x53\x69\x7a\x65\x7c\x77\x68\x69\x6c\x65\x7c\x76\x61\x72\x7c\x61\x6c\x70\x68\x61\x62\x65\x74\x7c\x65\x6e\x74\x72\x79\x7c\x6e\x75\x6d\x42\x69\x74\x73\x7c\x63\x61\x73\x65\x7c\x7c\x66\x75\x6e\x63\x74\x69\x6f\x6e\x7c\x69\x6e\x70\x75\x74\x7c\x62\x61\x73\x65\x52\x65\x76\x65\x72\x73\x65\x44\x69\x63\x7c\x4c\x5a\x53\x74\x72\x69\x6e\x67\x7c\x62\x72\x65\x61\x6b\x7c\x63\x68\x61\x72\x41\x74\x7c\x6c\x65\x6e\x67\x74\x68\x7c\x72\x65\x73\x75\x6c\x74\x7c\x6e\x75\x6c\x6c\x7c\x64\x65\x63\x6f\x6d\x70\x72\x65\x73\x73\x46\x72\x6f\x6d\x42\x61\x73\x65\x36\x34\x7c\x63\x68\x61\x72\x61\x63\x74\x65\x72\x7c\x31\x36\x7c\x73\x77\x69\x74\x63\x68\x7c\x6e\x65\x78\x74\x7c\x70\x75\x73\x68\x7c\x53\x74\x72\x69\x6e\x67\x7c\x5f\x30\x7c\x66\x6f\x72\x7c\x65\x6c\x73\x65\x7c\x6b\x65\x79\x53\x74\x72\x42\x61\x73\x65\x36\x34\x7c\x67\x65\x74\x42\x61\x73\x65\x56\x61\x6c\x75\x65\x7c\x33\x32\x7c\x41\x42\x43\x44\x45\x46\x47\x48\x49\x4a\x4b\x4c\x4d\x4e\x4f\x50\x51\x52\x53\x54\x55\x56\x57\x58\x59\x5a\x61\x62\x63\x64\x65\x66\x67\x68\x69\x6a\x6b\x6c\x6d\x6e\x6f\x70\x71\x72\x73\x74\x75\x76\x77\x78\x79\x7a\x30\x31\x32\x33\x34\x35\x36\x37\x38\x39\x7c\x74\x72\x75\x65\x7c\x66\x72\x6f\x6d\x43\x68\x61\x72\x43\x6f\x64\x65\x7c\x70\x72\x6f\x74\x6f\x74\x79\x70\x65\x7c\x6a\x6f\x69\x6e\x7c\x73\x70\x6c\x69\x74\x7c\x73\x70\x6c\x69\x63\x7c\x74\x68\x69\x73'["\x73\x70\x6c\x69\x74"]('\x7c'),0,{}));
(function(n,t){function k(n){return n.replace(/([a-z])([A-Z])/,"$1-$2").toLowerCase()}function c(n){return u?u+n:n.toLowerCase()}var i="",u,w=window.document,f=w.createElement("div"),b=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,e,v,y,p,h,s,o,a,l,r={};n.each({Webkit:"webkit",Moz:"",O:"o"},function(n,r){if(f.style[n+"TransitionProperty"]!==t)return i="-"+n.toLowerCase()+"-",u=r,!1}),e=i+"transform",r[v=i+"transition-property"]=r[y=i+"transition-duration"]=r[h=i+"transition-delay"]=r[p=i+"transition-timing-function"]=r[s=i+"animation-name"]=r[o=i+"animation-duration"]=r[l=i+"animation-delay"]=r[a=i+"animation-timing-function"]="",n.fx={off:u===t&&f.style.transitionProperty===t,speeds:{_default:400,fast:200,slow:600},cssPrefix:i,transitionEnd:c("TransitionEnd"),animationEnd:c("AnimationEnd")},n.fn.animate=function(i,r,u,f,e){return n.isFunction(r)&&(f=r,u=t,r=t),n.isFunction(u)&&(f=u,u=t),n.isPlainObject(r)&&(u=r.easing,f=r.complete,e=r.delay,r=r.duration),r&&(r=(typeof r=="number"?r:n.fx.speeds[r]||n.fx.speeds._default)/1e3),e&&(e=parseFloat(e)/1e3),this.anim(i,r,u,f,e)},n.fn.anim=function(i,u,f,c,w){var g,d={},it,rt="",ft=this,nt,tt=n.fx.transitionEnd,ut=!1;if(u===t&&(u=n.fx.speeds._default/1e3),w===t&&(w=0),n.fx.off&&(u=0),typeof i=="string")d[s]=i,d[o]=u+"s",d[l]=w+"s",d[a]=f||"linear",tt=n.fx.animationEnd;else{it=[];for(g in i)b.test(g)?rt+=g+"("+i[g]+") ":(d[g]=i[g],it.push(k(g)));rt&&(d[e]=rt,it.push(e)),u>0&&typeof i=="object"&&(d[v]=it.join(", "),d[y]=u+"s",d[h]=w+"s",d[p]=f||"linear")}return nt=function(t){if(typeof t!="undefined"){if(t.target!==t.currentTarget)return;n(t.target).unbind(tt,nt)}else n(this).unbind(tt,nt);ut=!0,n(this).css(r),c&&c.call(this)},u>0&&(this.bind(tt,nt),setTimeout(function(){ut||nt.call(ft)},u*1e3+25)),this.size()&&this.get(0).clientLeft,this.css(d),u<=0&&setTimeout(function(){ft.each(function(){nt.call(this)})},0),this},f=null})(Zepto),function(n,t){function i(i,r,u,f,e){typeof r!="function"||e||(e=r,r=t);var o={opacity:u};return f&&(o.scale=f,i.css(n.fx.cssPrefix+"transform-origin","0 0")),i.animate(o,r,null,e)}function f(t,u,f,e){return i(t,u,0,f,function(){r.call(n(this)),e&&e.call(this)})}var o=window.document,s=o.documentElement,u=n.fn.show,r=n.fn.hide,e=n.fn.toggle;n.fn.show=function(n,r){return u.call(this),n===t?n=0:this.css("opacity",0),i(this,n,1,"1,1",r)},n.fn.hide=function(n,i){return n===t?r.call(this):f(this,n,"0,0",i)},n.fn.toggle=function(i,r){return i===t||typeof i=="boolean"?e.call(this,i):this.each(function(){var t=n(this);t[t.css("display")=="none"?"show":"hide"](i,r)})},n.fn.fadeTo=function(n,t,r){return i(this,n,t,null,r)},n.fn.fadeIn=function(n,t){var i=this.css("opacity");return i>0?this.css("opacity",0):i=1,u.call(this).fadeTo(n,i,t)},n.fn.fadeOut=function(n,t){return f(this,n,null,t)},n.fn.fadeToggle=function(t,i){return this.each(function(){var r=n(this);r[r.css("opacity")==0||r.css("display")=="none"?"fadeIn":"fadeOut"](t,i)})}}(Zepto),function(n){n.getScript=function(n,t){var i=document.createElement("script");i.async="async",i.src=n,t&&(i.onload=t),document.getElementsByTagName("head")[0].appendChild(i)}}($);
(function(n){n.fn.lazyload=function(t,i){function f(){var t=u.filter(function(){var u=n(this),i=r.scrollTop(),e=i+r.height(),t=u.offset().top,f=t+u.height();return f>=i-o&&t<=e+o});e=t.trigger("lazyload"),u=u.not(e)}var r=n(window),o=t||0,s="data-src",u=this,e;this.one("lazyload",function(){var n=this.getAttribute(s);n=n||this.getAttribute("data-src"),n&&(this.setAttribute("src",n),typeof i=="function"&&i.call(this))});return r.scroll(f),r.resize(f),f(),this}})(window.jQuery||window.Zepto),SMH=window.SMH||{},SMH={ver:"1.0.0",update:"2014/4/30",rootUrl:"/",ns:function(n){var i,t,r;if(!n||!n.length)return null;for(i=SMH,n=n.split("."),t=n[0]=="SMH"?1:0,r=n.length;t<r;t++)i[n[t]]=i[n[t]]||{},i=i[n[t]];return i}},SMH.utils=function(n,t,i){return{head:i.getElementsByTagName("head")[0]||i.documentElement,isMobile:/(Android|webOS|iPhone|Windows Phone|iPod|BlackBerry|SymbianOS)/i.test(navigator.userAgent),isTouch:"createTouch"in i,ticks:+new Date,isInViewport:function(n){var r=n.getBoundingClientRect();return r.top>=0&&r.left>=0&&r.bottom<=(t.innerHeight||i.documentElement.clientHeight)&&r.right<=(t.innerWidth||i.documentElement.clientWidth)},getQuery:function(n){var t=RegExp("[#&]"+n+"=([^&]*)").exec(window.location.hash);return t?decodeURIComponent(t[1].replace(/\+/g," ")):""},cookie:function(){function t(t,i,r){var s,u,h,o,f,e;if(typeof i!="undefined"){r=r||{},i===null&&(i="",r.expires=-1),s="",r.expires&&(typeof r.expires=="number"||r.expires.toUTCString)&&(typeof r.expires=="number"?(u=new Date,u.setTime(u.getTime()+r.expires*864e5)):u=r.expires,s="; expires="+u.toUTCString());var a=r.path?"; path="+r.path:"",l=r.domain?"; domain="+r.domain:"",c=r.secure?"; secure":"";document.cookie=[t,"=",encodeURIComponent(i),s,a,l,c].join("")}else{if(h=null,document.cookie&&document.cookie!="")for(o=document.cookie.split(";"),f=0;f<o.length;f++)if(e=n.trim(o[f]),e.substring(0,t.length+1)==t+"="){h=decodeURIComponent(e.substring(t.length+1));break}return h}}return{set:function(n,i,r){r=r||{expires:365,path:"/"},t(n,i,r)},get:function(n){return console.log("aaa"),t(n)},remove:function(n){t(n,null,{expires:-1,path:"/"})},clear:function(){for(var u=document.cookie.split(";"),t,r,i=0,f=u.length;i<f;i++)t=n.trim(u[i]),r=t.substring(0,t.indexOf("=")),this.remove(r)}}}(),storage:function(){var t=this,n=function(){try{return localStorage in window&&window.localStorage}catch(n){return!1}}();return{get:function(t){return n?localStorage.getItem(t):SMH.utils.cookie.get(t)},set:function(t,i){n?localStorage.setItem(t,i):SMH.utils.cookie.set(t,i)},remove:function(t){n?localStorage.removeItem(t):SMH.utils.cookie.remove(t)},clear:function(){n?localStorage.clear():SMH.utils.cookie.clear()}}}()}}(window.jQuery||window.Zepto,window,window.document),SMH.popup=function(){var n={ids:["#category","#history","#search","#shelf"],cls:["icon-list-on","icon-history-on","icon-search-on","icon-shelf-on"],pops:["#popCat","#popHistory","#popSearch","#popShelf"]},t=n.ids.length;return{hideAll:function(){for(var i=0;i<t;i++)$(n.ids[i]).removeClass(n.cls[i]),$(n.pops[i]).hide()},bind:function(){for(var r=this,i=0;i<t;i++)(function(t){var f=n.ids[t],i=n.cls[t],u=n.pops[t];$(f).click(function(){$(this).hasClass(i)?($(this).removeClass(i),$(u).hide()):(r.hideAll(),$(this).addClass(i),$(u).show())})})(i)}}}(),SMH.history=function(){function t(n){var i=n*1e3,r=new Date(i),o=new Date,s=Date.parse(o.toDateString()),e=o.getTime(),c=864e5,h=36e5,u=0,f=function(n){return n<10?"0"+n:n},t=[];if(s>i){u=Math.ceil((s-i)/c);switch(u){case 1:t.push("昨天 ");break;case 2:t.push("前天 ");break;default:t.push(f(r.getMonth()+1),"月",f(r.getDate()),"日")}t.push(f(r.getHours())+":"+f(r.getMinutes()))}else e-i<6e4?(u=Math.ceil((e-i)/1e3),t.push(u,"秒前")):(u=Math.ceil((e-i)/h),u==1?t.push(Math.floor((e-i)%h/6e4),"分钟前"):t.push("今天 ",f(r.getHours()),":",f(r.getMinutes())));return t.join("")}var n={maxLen:30,len:0,cname:"viewed",cvalue:[],got:!1,init:!1};return{get:function(){if(n.got===!1){var t=SMH.utils.storage.get(n.cname);t=typeof t!="string"?undefined:JSON.parse(t),t&&$.each(t,function(){n.cvalue.push(this),n.len++}),n.got=!0}},add:function(t){this.get(),t!=null&&typeof t!="undefined"&&($.each(n.cvalue,function(i){if(this.bid==t.bid)return n.cvalue.splice(i,1),n.len--,!1}),n.cvalue.push(t),n.len++,n.len>n.maxLen&&(n.cvalue.splice(0,n.len-n.maxLen+1),n.len=n.maxLen)),n.cvalue.length>0&&SMH.utils.storage.set(n.cname,JSON.stringify(n.cvalue))},remove:function(t,i){if(n.cvalue.splice(t,1),n.len--,n.len<=0?SMH.utils.storage.remove(n.cname):SMH.utils.storage.set(n.cname,JSON.stringify(n.cvalue)),$(i).hide(200),n.len<=0){$(".vr-list").html("暂时没有观看记录!");return}},clear:function(){SMH.utils.storage.remove(n.cname),n.len=0,n.cvalue=[],$(".vr-list").html("暂时没有观看记录!")},init:function(){var t=this;$("#history").click(function(){n.init==!1&&t.format()})},format:function(){var r,i,u;this.get(),n.init=!0,r=[],n.len>0&&$.each(n.cvalue,function(i,u){var f=[];f.push('<li rel="'+i+'"><h5><dfn><a href="/comic/'+u.bid+'/">'+u.bn+'</a> <em>/</em> <a href="/comic/'+u.bid+"/"+u.cid+'.html" class="red">'+u.cn+"</a></dfn>"),i==n.cvalue.length-1?f.push("<span>正在浏览观看……</span>"):f.push("<span>上次于 "+t(u.t)+" 观看</span>"),f.push("</h5>"),f.push('<p><b><a href="/comic/'+u.bid+"/"+u.cid+".html"+(u.p==1?"":"#p="+u.p)+'">继续观看<i class="iconfont">&#xe626;</i></a></b></p>'),f.push("</li>"),r.push(f.join(""))}),i=this,u=n.len,u==0?$(".vr-list").html("暂时没有观看记录!"):($(".vr-list").html(r.reverse().join("")),$(".vr-empty a").click(function(){return i.clear(),!1}),$(".vr-list li").swipeLeft(function(){i.remove($(this).attr("rel"),this)}))}}}(),SMH.suggest=function(){function h(n,t){var r=[],i;for(i in n)r.push("<li"),r.push(' title="'+n[i].t+'" data-url="'+n[i].u+'"">'),r.push('<a href="'+n[i].u+'">'+(n[i].t+"["+n[i].a+"]").replace(new RegExp("("+t+")","gi"),"<strong>$1</strong>")+"</a> "),r.push(n[i].s?"<em>已完结</em>":"<span>"+n[i].ct+"</span>"),r.push("</li>");return r.join("")}function o(t,u){var f=typeof t=="object"?h(t,u):t;n.html("<ul>"+f+"</ul>"),r=n.find("li").length,t.length>0?(n.show(),i[u]=f,i.length>20&&i.pop()):n.hide()}function l(n){i[n]?o(i[n],n):$.ajax({type:"POST",url:c,data:{key:n,s:1},dataType:"json",success:function(t){o(t,decodeURIComponent(n))}})}function e(){u&&clearTimeout(u),u=window.setTimeout(function(){var i=$.trim(t.val());s!=i&&(s=i,i!=""?l(encodeURIComponent(i)):(r=0,n.hide().html("")))},delay)}var c="/support/word.ashx",u=null,i=[],r=0,t,f,n,s;return{check:function(){var n=$.trim(t.val());if(n=="")return t.focus(),window.alert("请输入漫画名称"),!1;window.location.href=SMH.rootUrl+"s/"+n+".html"},init:function(i){var o=this,u={input:"#txtKey",submit:"#btnSubmit",delay:100,result:"#suggest"};$.extend(u,i),delay=u.delay||200,t=$(u.input),f=$(u.submit),n=$(u.result),t.focus(function(){r>0&&n.show()}).keypress(function(n){n.stopPropagation(),e()}).keyup(function(n){return n.stopPropagation(),n.keyCode===13&&o.check(),!1});t.on("input",function(n){n.stopPropagation(),e()});f.click(function(){o.check()})}}}(),SMH.shelf=function(){function t(){return"/tools/submit_ajax.ashx?action="+(n.status==1?"user_book_shelf_delete":"user_book_shelf_add")}var n={status:0,checked:!1,init:!1,id:0};return{get:function(){n.checked===!1&&$.getJSON("/tools/submit_ajax.ashx?action=user_book_shelf_check",{book_id:n.id},function(i){n.status=i.status,$("#popShelf .msg").text("共"+i.total+"位会员收藏到书架").show(),$("#popShelf ul").append($("<li><a>"+(i.status==1?"从书架移除":"加入书架")+"</a></li>").click(function(){$.post(t(),{book_id:n.id},function(n){window.alert(n.msg),location.reload()},"json")})),n.checked=!0})},init:function(){var t=this;$("#shelf").click(function(){n.init==!1&&$.getJSON("/tools/submit_ajax.ashx?action=user_check_login",function(i){i.status==1?(n.id=$("#SOHUCS").attr("sid"),$("#popShelf ul").append($('<li><a href="/user/book/shelf">查看书架</a></li>')),typeof n.id!="undefined"&&t.get()):($("#popShelf .msg").text("对不起，您尚未登录，无法使用此功能！").show(),$("#popShelf ul").append($('<li><a href="http://www.ikanman.com/user/login">现在登录</a></li>')).append($('<li><a href="javascript:void(0)">以后再说</a></li>').click(function(){SMH.popup.hideAll()}))),n.init=!0})})}}}(),SMH.reader=function(n,t){return function(i){function f(){var n=t.getQuery("p");return n=n<=0?1:n>=r.count?r.count:n,parseInt(n,10)}function u(n){return r.host+r.images[n]}function o(t){for(var i=r.page;i<r.page+t;i++){if(i>r.count)break;n("<img />")[0].src=u(i)}}var r=n.extend({host:"http://i.hamreus.com:8080",bookId:0,chapterId:0,count:0,images:[],page:1,status:1,block_cc:"CN",panel:{container:"#panel",prev:"#prev",next:"#next"},container:{manga:"#manga",loading:"#loading",pageNo:"#pageNo",action:"#action"}},i),e=(window.innerHeight||document.documentElement.clientHeight)-156;return{panelBind:function(){var i=this;if(t.cookie.get("panel")==1){n(r.panel.next).on("click",function(){i.next()});n(r.panel.prev).on("click",function(){i.prev()})}else{n(r.panel.next).addClass("manga-panel-on").html("<span>下一页</span>"),n(r.panel.prev).addClass("manga-panel-on").html("<span>上一页</span>");n(r.panel.container).one("click",function(t){t.preventDefault();n(r.panel.next).removeClass("manga-panel-on").empty().on("click",function(){i.next()});n(r.panel.prev).removeClass("manga-panel-on").empty().on("click",function(){i.prev()})});t.cookie.set("panel",1,{expires:1,path:"/"})}$(window).scroll()},load:function(){var t=this;n(r.container.pageNo).text(r.page),n(r.container.manga).find("img").remove(),this.isSecretLoad()&&($("#manga h4").remove(),n(r.container.loading).text("图片努力载入中...").show(),n('<img width="100%" src="'+u(r.page-1)+'" />').on("load",function(){n(r.container.loading).hide(),o(1)}).on("error",function(){n(this).hide(),n(r.container.loading).text("图片载入失败！").show()}).appendTo(r.container.manga).show("fast")),setTimeout(function(){SMH.history.add({bn:r.bookName,bid:r.bookId,cn:r.chapterTitle,cid:r.chapterId,p:r.page,t:parseInt(+new Date/1e3)})},1e3)},isSecretLoad:function(){var n=SMH.utils.cookie.get("country"),i=n!=null&&r.block_cc.indexOf(n)<0,t=(h=(new Date).getHours(),(h>=20||h<8)&&r.status!=2);return r.status==1||i||t},preInit:function(){r.status==1||SMH.utils.cookie.get("country")!=null?this.init():$.get("/tools/submit_ajax.ashx?action=user_check_login",function(){SMH.reader(r).init()})},init:function(){var i=document.createElement("canvas"),u=i.getContext&&i.getContext("2d")&&i.toDataURL("image/webp").indexOf("data:image/webp")==0,t;u||$.each(r.images,function(n,t){r.images[n]=t.replace(/(.*)\.webp$/gi,"$1")}),r.page=f(),t=this,t.load(),t.panelBind(),n(r.container.manga).css("min-height",e),window.onhashchange=function(){r.page=f(),t.load();try{$("[id^=boluo_adContainer] iframe").attr("src",function(n,t){return t})}catch(n){}},n(r.container.action).find("a").each(function(){n(this).bind("click",function(){switch(n(this).attr("data-action")){case"next":t.next();break;case"prev":t.prev();break;case"chapter.next":t.chapter(r.bookId,r.chapterId).next();break;case"chapter.prev":t.chapter(r.bookId,r.chapterId).prev()}})})},next:function(){r.page++,r.page>r.count?this.chapter(r.bookId,r.chapterId).next():window.location.hash="#p="+String(r.page)},prev:function(){r.page--,r.page<=0?this.chapter(r.bookId,r.chapterId).prev():window.location.hash="#p="+String(r.page)},chapter:function(n){function i(t){t===1?r.nextId==0?(r.page--,window.alert("没有下一章了")):location.href="/comic/"+n+"/"+r.nextId+".html":r.prevId==0?(r.page++,window.alert("没有上一章了")):location.href="/comic/"+n+"/"+r.prevId+".html"}var u="/support/chapter.ashx";return{next:function(){i(1)},prev:function(){i(0)}}}}}}(window.jQuery||window.Zepto,SMH.utils);var updateOldCookie=function(){var n=SMH.utils.cookie.get("country"),i,t;if(n!=null&&n.length>2){i="%u4E2D%u56FD",t=["%u9999%u6E2F","%u6FB3%u95E8","%u53F0%u6E7E"];function r(){return n!=null&&(n.indexOf(i)<0||n.indexOf(t[0])>=0||n.indexOf(t[1])>=0||n.indexOf(t[2])>=0)?!0:!1}SMH.utils.cookie.set("country","HX",{expires:r()?365:-1,path:"/",domain:".ikanman.com"})}};updateOldCookie(),function(n){function t(){if($("#__VIEWSTATE").length>0&&$("#chapterList h4").length>0){var t=n.get("country"),r=t!=null&&chapterInfo.block_cc.indexOf(t)<0,i=(h=(new Date).getHours(),h>=20||h<8)&&chapterInfo.status!=2;(r||i)&&($("#chapterList").html(LZString.decompressFromBase64($("#__VIEWSTATE").val())),$("#__VIEWSTATE").remove())}}typeof chapterInfo!="undefined"&&chapterInfo!=null&&(chapterInfo.status==1||n.get("country")!=null?t():$.get("/tools/submit_ajax.ashx?action=user_check_login",function(){t()}))}(SMH.utils.cookie),$(function(){new FastClick(document.body),SMH.popup.bind(),SMH.suggest.init(),SMH.history.init(),SMH.shelf.init(),$("#toPC").click(function(){var n=window.location.href.toLowerCase();window.location.href=n.replace("m.ikanman.com","www.ikanman.com")+"?from=1"})});
